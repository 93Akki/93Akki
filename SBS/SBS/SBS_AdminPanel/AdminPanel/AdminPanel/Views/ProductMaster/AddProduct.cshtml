@model AdminPanel.Models.AddProduct
@{
    ViewBag.Title = "AddProduct";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            <i class="fa fa-fw fa-plus-circle"></i>&nbsp;Add Product
        </h1>
        <ol class="breadcrumb">
            <li><a href="@Url.Action("Index", "ProductMaster")"><i class="fa fa-fw fa-th-large"></i>Product Master</a></li>
            <li class="active">Add Product</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content">
        <!-- Info boxes -->@using (Html.BeginForm("SaveNewProduct", "ProductMaster", FormMethod.Post, new { enctype = "multipart/form-data", @class = "form-horizontal" }))
        {
            <div class="row">
                <div class="col-xs-12">
                    <div class="nav-tabs-custom">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#activity" data-toggle="tab"><i class="fa fa-fw fa-th-large"></i>&nbsp;Product Detail</a></li>
                            <li><a href="#ProductImgDiv" data-toggle="tab"><i class="fa fa-fw fa-upload"></i>&nbsp;Product Image</a></li>
                            <li><a href="#ProductLinkedImgDiv" data-toggle="tab"><i class="fa fa-fw fa-upload"></i>&nbsp;Product Linked Images</a></li>
                        </ul>
                        <div class="tab-content">

                            <div class="active tab-pane" id="activity">
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Category <b style="color:red;">*</b></label>
                                        <div class="col-sm-8">
                                            @Html.DropDownListFor(m => m.catID, ViewBag.CategoryList as SelectList, new { @class = "form-control", @required = "required", @id = "drpCategoryList" })
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Product Name <b style="color:red;">*</b></label>
                                        <div class="col-sm-8">
                                            @Html.TextBoxFor(m => m.PName, new { @class = "form-control", @required = "required" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Market Rate</label>
                                        <div class="col-sm-8">
                                            @Html.TextBoxFor(m => m.marketRate, new { @class = "form-control", @Value = "0.00" })
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">SBS Rate <b style="color:red;">*</b></label>
                                        <div class="col-sm-8">
                                            @Html.TextBoxFor(model => model.sbsRate, new { @class = "form-control", @required = "required" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Quantity<b style="color:red;">*</b></label>
                                        <div class="col-sm-8" style="display:flex;">
                                            @Html.TextBoxFor(m => m.Qty, new { @class = "form-control", @required = "required", @Value = "0.00" })
                                            @Html.DropDownListFor(m => m.QtyType, ViewBag.QtyTypeList as SelectList, "Select Qty Type", new { @class = "form-control", @required = "required", @id = "drpQtyTypeList" })
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Product Description <b style="color:red;">*</b></label>
                                        <div class="col-sm-8">
                                            @Html.TextAreaFor(m => m.ProductDescription, new { @class = "form-control", @required = "required" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Show Add To Cart</label>
                                        <div class="col-sm-8">
                                            @Html.CheckBoxFor(m => m.IsAddToCart)
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Status (Active/Inactive) <b style="color:red;">*</b></label>
                                        <div class="col-sm-8">
                                            @Html.CheckBoxFor(m => m.IsActive)
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="inputName" class="col-sm-4 control-label">Product Document</label>
                                        <div class="col-sm-8">
                                            <input type="file" id="ProductDocument" name="ProductDocument" />
                                        </div>
                                    </div>
                                </div>
                                <div class="box-footer">
                                    <button type="submit" class="btn btn-primary">Save</button>
                                </div>

                            </div>
                            <!-- /.tab-pane -->
                            <div class="tab-pane" id="ProductImgDiv">
                                <ul class="timeline timeline-inverse">
                                    <!-- /.timeline-label -->
                                    <!-- timeline item -->
                                    <li>
                                        <i class="fa fa-camera bg-purple"></i>
                                        <div class="timeline-item">
                                            <h3 class="timeline-header">
                                                <b style="float:left;">Upload Product Image</b>
                                                <input style="float:right;margin-top:-5px;" type="file" id="ProductImg" name="ProductImg" required />
                                                <label style="clear:both;"></label>
                                            </h3>
                                            <div class="timeline-body" id="ProductImgBody">

                                            </div>
                                        </div>
                                    </li>
                                    <!-- END timeline item -->
                                </ul>
                            </div>

                            <!-- /.tab-pane -->
                            <div class="tab-pane" id="ProductLinkedImgDiv">
                                <ul class="timeline timeline-inverse">
                                    <!-- /.timeline-label -->
                                    <!-- timeline item -->
                                    <li>
                                        <i class="fa fa-camera bg-purple"></i>
                                        <div class="timeline-item">
                                            <h3 class="timeline-header">
                                                <b style="float:left;">Upload Product Linked Images</b>
                                                <input style="float:right;margin-top:-5px;" type="file" id="ProductLinkedImg" name="ProductLinkedImg" multiple="multiple" />
                                                <label style="clear:both;"></label>
                                            </h3>
                                            <div class="timeline-body" id="ProductLinkedImgBody">
                                                <div class="row" style="padding:10px;"></div>
                                            </div>
                                        </div>
                                    </li>
                                    <!-- END timeline item -->
                                </ul>
                            </div>
                        </div>
                        <!-- /.tab-content -->
                    </div>
                    <!-- /.nav-tabs-custom -->
                </div>
            </div>
        }
    </section>
</div>
<script>


    $(document).ready(function () {
        if (window.File && window.FileList && window.FileReader) {
            $("#ProductImg").on("change", function (e) {
                var files = e.target.files,
                  filesLength = files.length;
                for (var i = 0; i < filesLength; i++) {
                    var f = files[i]
                    var fileReader = new FileReader();
                    fileReader.onload = (function (e) {
                        var file = e.target;
                        var ImgHtml = "<span class=\"pip\">" +
                          "<img style=\"width:350px;\" class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + file.name + "\"/>" +
                          "<br/><span style=\"cursor: pointer;\" span class=\"remove\"><i class=\"fa fa-fw fa-remove\"></i> Remove</span>" +
                          "</span>";
                        $("#ProductImgBody").html(ImgHtml);
                        $(".remove").click(function () {
                            $(this).parent(".pip").remove();
                            $("#ProductImg").val("");
                        });

                    });
                    fileReader.readAsDataURL(f);
                }
                console.log(files);
            });

            $("#ProductLinkedImg").on("change", function (e) {
                var files = e.target.files,
                  filesLength = files.length;
                for (var i = 0; i < filesLength; i++) {
                    var f = files[i]
                    var fileReader = new FileReader();
                    fileReader.onload = (function (e) {
                        var file = e.target;
                        var ImgHtml = "<div style=\"border: 2px solid;padding: 0px;border-color: #cccccc;\" class=\"col-md-4\"><span class=\"pip\" style=\"padding: 5px;\">" +
                          "<img style=\"width:312px;height:300px;\" class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + file.name + "\"/>" +
                          "<br/><span style=\"cursor: pointer;\" span class=\"remove\"><i class=\"fa fa-fw fa-remove\"></i> Remove</span>" +
                          "</span></div>";
                        $("#ProductLinkedImgBody .row").append(ImgHtml);
                        $(".remove").click(function () {
                            $(this).parent(".pip").remove();
                            $("#ProductLinkedImg").val("");
                        });

                    });
                    fileReader.readAsDataURL(f);
                }
                console.log(files);
            });


            $("#IDProofs").on("change", function (e) {
                var files = e.target.files,
                  filesLength = files.length;
                for (var i = 0; i < filesLength; i++) {
                    var f = files[i]
                    var fileReader = new FileReader();
                    fileReader.onload = (function (e) {
                        var file = e.target;
                        var ImgHtml = "<div style=\"border: 2px solid;padding: 0px;border-color: #cccccc;\" class=\"col-md-4\"><span class=\"pip\" style=\"padding: 5px;\">" +
                          "<img style=\"width:312px;height:300px;\" class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + file.name + "\"/>" +
                          "<br/><span style=\"cursor: pointer;\" span class=\"remove\"><i class=\"fa fa-fw fa-remove\"></i> Remove</span>" +
                          "</span></div>";
                        $("#IdProofsBody .row").append(ImgHtml);
                        $(".remove").click(function () {
                            $(this).parent(".pip").remove();
                            $("#IDProofs").val("");
                        });

                    });
                    fileReader.readAsDataURL(f);
                }
                console.log(files);
            });
        } else {
            alert("Your browser doesn't support to File API")
        }
    });
</script>
